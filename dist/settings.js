import{r as c,j as e,R as q,a as G,E as H}from"./index.js";import{g as V,O as J}from"./models.js";import"./logger.js";function Y(s){const r=[],i=[],x=[];s.name?.trim()?s.name.length<3&&i.push("Name is very short - consider making it more descriptive"):r.push("Name is required"),s.description?.trim()?s.description.length<10&&i.push("Description is too brief - add more details about your voice"):r.push("Description is required");const l=s.exampleTweets?.filter(h=>h.trim().length>0)||[];if(l.length===0?r.push("At least one example tweet is required"):l.length<3&&i.push("Adding 3-5 example tweets will improve AI generation quality"),l.forEach((h,b)=>{h.length<20&&i.push(`Example ${b+1} is very short - longer examples work better`),h.length>280&&i.push(`Example ${b+1} exceeds 280 characters (${h.length} chars)`)}),l.length>=2){const h=l.reduce((u,y)=>u+y.length,0)/l.length;l.every(u=>Math.abs(u.length-h)<20)&&x.push("Vary the length of your example tweets for better versatility")}return s.toneAttributes&&["formality","humor","technicality","empathy","energy","authenticity"].every(u=>s.toneAttributes[u]===50)&&x.push("Adjust tone attributes to better reflect your unique voice"),{isValid:r.length===0,errors:r,warnings:i,suggestions:x}}const B={professional:{name:"Professional",description:"Formal, measured, and authoritative",attributes:{formality:85,humor:20,technicality:60,empathy:50,energy:40,authenticity:50}},casual:{name:"Casual",description:"Relaxed, friendly, and approachable",attributes:{formality:25,humor:65,technicality:35,empathy:70,energy:60,authenticity:75}},technical:{name:"Technical Expert",description:"Knowledgeable, precise, and detailed",attributes:{formality:70,humor:30,technicality:90,empathy:45,energy:50,authenticity:55}},engaging:{name:"Engaging Storyteller",description:"Energetic, relatable, and compelling",attributes:{formality:40,humor:70,technicality:40,empathy:80,energy:85,authenticity:85}},thoughtLeader:{name:"Thought Leader",description:"Insightful, balanced, and inspiring",attributes:{formality:65,humor:45,technicality:70,empathy:65,energy:60,authenticity:70}},educator:{name:"Educator",description:"Clear, patient, and encouraging",attributes:{formality:55,humor:50,technicality:65,empathy:80,energy:55,authenticity:65}}};function Q(s){const r={...s,version:"1.0",exportedAt:new Date().toISOString()};return JSON.stringify(r,null,2)}function X(s){let r=`# ${s.name}

`;return s.description&&(r+=`## Description

${s.description}

`),s.guidelines&&(r+=`## Guidelines

${s.guidelines}

`),r+=`## Tone Attributes

`,r+=`- **Formality**: ${s.toneAttributes.formality}/100
`,r+=`- **Humor**: ${s.toneAttributes.humor}/100
`,r+=`- **Technicality**: ${s.toneAttributes.technicality}/100
`,r+=`- **Empathy**: ${s.toneAttributes.empathy}/100
`,r+=`- **Energy**: ${s.toneAttributes.energy}/100
`,r+=`- **Authenticity**: ${s.toneAttributes.authenticity}/100

`,s.exampleTweets.length>0&&(r+=`## Example Tweets

`,s.exampleTweets.forEach((i,x)=>{r+=`${x+1}. ${i}

`})),r}function Z(s){const r=JSON.parse(s);if(!r.name||!r.toneAttributes)throw new Error("Invalid brand voice format");const i={formality:r.toneAttributes.formality??50,humor:r.toneAttributes.humor??50,technicality:r.toneAttributes.technicality??50,empathy:r.toneAttributes.empathy??50,energy:r.toneAttributes.energy??50,authenticity:r.toneAttributes.authenticity??50};return{...r,id:r.id||`voice_${Date.now()}`,toneAttributes:i,isTemplate:!1,createdAt:new Date,updatedAt:new Date}}function E(){return{formality:50,humor:50,technicality:50,empathy:50,energy:50,authenticity:50}}function ee(s){return{formality:{label:"Formality",low:"Casual",high:"Professional"},humor:{label:"Humor",low:"Serious",high:"Humorous"},technicality:{label:"Technicality",low:"Simple",high:"Technical"},empathy:{label:"Empathy",low:"Direct",high:"Empathetic"},energy:{label:"Energy",low:"Calm",high:"Energetic"},authenticity:{label:"Authenticity",low:"Reserved",high:"Vulnerable"}}[s]}const z=[{id:"professional",name:"Professional",description:"Polished, authoritative, and trustworthy. Ideal for business and thought leadership.",icon:"ðŸ’¼",guidelines:"Use proper grammar, avoid slang, maintain a helpful and expert tone.",exampleTweets:["We're thrilled to announce our latest partnership. This collaboration marks a significant milestone in our mission to deliver value.","Effective leadership requires empathy and clarity. Here are 3 ways to improve team communication today.","Great question! We recommend analyzing the long-term impact before making a decision. Feel free to reach out for more details."]},{id:"casual",name:"Casual & Friendly",description:"Relaxed, approachable, and conversational. Great for community engagement.",icon:"â˜•",guidelines:"Write like you are talking to a friend. Use emojis occasionally. Be warm.",exampleTweets:["Just grabbed some coffee and ready to crush the day! â˜• hope you all are having a great start to the week.","Totally agree! It's the little things that make a huge difference. Thanks for sharing.","Who else is excited for the weekend? planning to binge-watch some shows! ðŸŽ¬"]},{id:"witty",name:"Witty & Tech",description:"Smart, sharp, and a bit geeky. Perfect for tech twitter and developers.",icon:"âš¡",guidelines:"Clever wordplay, tech references, maybe a bit of sarcasm. concise.",exampleTweets:["Debugging production on a Friday... said no one ever (willingly). ðŸ›âž¡ï¸ðŸ”¥","If it compiles, ship it. If it breaks, call it a feature. #devlife","AI isn't taking your job, but someone using AI might. Just saying. ðŸ¤–"]},{id:"custom",name:"Create Custom",description:"Build your unique voice from scratch.",icon:"âœ¨",guidelines:"",exampleTweets:["","",""]}],te=({voices:s,onClose:r,onRefresh:i})=>{const[x,l]=c.useState("list"),[h,b]=c.useState(null),[u,y]=c.useState(!1),[d,m]=c.useState(null),[S,N]=c.useState(!1),[T,w]=c.useState(null),A=c.useRef(null),[o,g]=c.useState({name:"",description:"",exampleTweets:["","",""],guidelines:"",toneAttributes:E(),category:"custom",tags:[]}),M=t=>{b(t),y(!1),l("edit"),g({...t,exampleTweets:[...t.exampleTweets],toneAttributes:{...t.toneAttributes}}),m(null),w(null)},L=()=>{y(!0),b(null),l("templates"),m(null),w(null)},I=t=>{const a=z.find(n=>n.id===t);if(a){y(!0),b(null),l("edit");let n=E();a.id==="professional"&&(n={...n,formality:80,humor:10,technicality:60}),a.id==="casual"&&(n={...n,formality:20,humor:70,empathy:80}),a.id==="witty"&&(n={...n,formality:40,humor:90,technicality:80,energy:70});const p=a.id==="custom";g({name:p?"":a.name,description:p?"":`${a.description} ${a.guidelines}`,exampleTweets:[...a.exampleTweets],guidelines:p?"":a.guidelines,toneAttributes:n,category:"custom",tags:[]})}},f=async(t,a)=>{if(confirm(`Are you sure you want to delete "${a}"? This action cannot be undone.`))try{const n=await chrome.runtime.sendMessage({type:"delete-brand-voice",payload:{id:t}});n.success?(i(),m(null)):m(n.error||"Failed to delete brand voice")}catch(n){m(n.message||"Failed to delete brand voice")}},k=()=>{const t=Y(o);return w(t),t},j=async()=>{const t=k();if(!t.isValid){m(t.errors[0]);return}N(!0),m(null);try{const a=o.exampleTweets?.filter(v=>v.trim().length>0)||[],n={id:h?.id||`voice_${Date.now()}`,name:o.name.trim(),description:o.description?.trim()||"",exampleTweets:a,guidelines:o.guidelines?.trim()||"",toneAttributes:o.toneAttributes||E(),category:o.category||"custom",tags:o.tags||[],isTemplate:!1,createdAt:h?.createdAt||new Date,updatedAt:new Date},p=await chrome.runtime.sendMessage({type:"save-brand-voice",payload:n});p.success?(b(null),y(!1),l("list"),i()):m(p.error||"Failed to save brand voice")}catch(a){m(a.message||"Failed to save brand voice")}finally{N(!1)}},R=()=>{b(null),y(!1),l("list"),m(null),w(null)},D=t=>{const a=Q(t),n=new Blob([a],{type:"application/json"}),p=URL.createObjectURL(n),v=document.createElement("a");v.href=p,v.download=`${t.name.replace(/[^a-z0-9]/gi,"_").toLowerCase()}.json`,v.click(),URL.revokeObjectURL(p)},O=t=>{const a=X(t),n=new Blob([a],{type:"text/markdown"}),p=URL.createObjectURL(n),v=document.createElement("a");v.href=p,v.download=`${t.name.replace(/[^a-z0-9]/gi,"_").toLowerCase()}.md`,v.click(),URL.revokeObjectURL(p)},P=async t=>{const a=t.target.files?.[0];if(a){try{const n=await a.text(),p=Z(n),v=await chrome.runtime.sendMessage({type:"save-brand-voice",payload:p});v.success?(i(),m(null)):m(v.error||"Failed to import brand voice")}catch(n){m(n.message||"Failed to import brand voice")}A.current&&(A.current.value="")}},W=(t,a)=>{const n=[...o.exampleTweets||["","",""]];n[t]=a,g({...o,exampleTweets:n})},$=()=>{g({...o,exampleTweets:[...o.exampleTweets||[],""]})},K=t=>{const a=[...o.exampleTweets||[]];a.splice(t,1),g({...o,exampleTweets:a})},U=t=>{const a=B[t];a&&g({...o,toneAttributes:{...a.attributes}})},_=(t,a)=>{g({...o,toneAttributes:{...o.toneAttributes||E(),[t]:a}})},C=t=>{const a=ee(t),n=o.toneAttributes?.[t]||50;return e.jsxs("div",{className:"rounded-xl border border-slate-100 bg-white p-4 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-semibold text-slate-700",children:a.label}),e.jsx("span",{className:"text-sm font-bold text-[var(--koto-sakura-pink)]",children:n})]}),e.jsxs("div",{className:"flex items-center gap-3 text-[10px] font-bold text-slate-400 uppercase tracking-wide",children:[e.jsx("span",{className:"w-16 text-left leading-tight",children:a.low}),e.jsx("input",{type:"range",min:"0",max:"100",value:n,onChange:p=>_(t,parseInt(p.target.value,10)),className:"flex-1 h-2 bg-slate-100 rounded-full appearance-none cursor-pointer accent-[var(--koto-sakura-pink)]"}),e.jsx("span",{className:"w-16 text-right leading-tight",children:a.high})]})]},t)};return x==="templates"?e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto backdrop-blur-md bg-white/30 p-4 flex items-center justify-center font-sans",children:e.jsxs("div",{className:"bg-white rounded-[32px] shadow-2xl border border-white/50 w-full max-w-5xl max-h-[90vh] flex flex-col overflow-hidden animate-in zoom-in-95 duration-300",children:[e.jsxs("div",{className:"p-8 border-b border-slate-100 bg-slate-50/50 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Choose a Template"}),e.jsx("p",{className:"text-slate-500",children:"Select a starting point for your new brand voice."})]}),e.jsx("button",{onClick:()=>l("list"),className:"p-2 rounded-full hover:bg-slate-100 transition-colors text-slate-500",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-8 bg-slate-50/30",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:z.map(t=>e.jsxs("button",{onClick:()=>I(t.id),className:"group text-left p-6 rounded-2xl border-2 border-slate-100 bg-white hover:border-[var(--koto-sakura-pink)] hover:shadow-xl hover:shadow-pink-500/10 transition-all duration-300 flex flex-col h-full",children:[e.jsx("div",{className:"text-4xl mb-4 group-hover:scale-110 transition-transform duration-300 transform origin-left",children:t.icon}),e.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-2",children:t.name}),e.jsx("p",{className:"text-sm text-slate-500 leading-relaxed mb-4 flex-1",children:t.description}),e.jsx("div",{className:"w-full py-3 rounded-xl bg-slate-50 text-slate-600 font-bold text-sm text-center group-hover:bg-[var(--koto-sakura-pink)] group-hover:text-white transition-colors",children:"Select"})]},t.id))})})]})}):x==="edit"?e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto backdrop-blur-md bg-white/30 p-4 flex items-center justify-center font-sans",children:e.jsxs("div",{className:"bg-white rounded-[32px] shadow-2xl border border-white/50 w-full max-w-4xl max-h-[90vh] flex flex-col overflow-hidden animate-in zoom-in-95 duration-300",children:[e.jsxs("div",{className:"p-6 md:p-8 border-b border-slate-100 bg-slate-50/50 flex items-center justify-between sticky top-0 z-10",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:u?"Create Brand Voice":"Edit Brand Voice"}),e.jsx("p",{className:"text-slate-500 text-sm",children:"Fine-tune your AI's personality settings."})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:R,className:"px-6 py-2.5 rounded-xl border border-slate-200 text-slate-600 font-bold text-sm hover:bg-slate-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:j,disabled:S,className:"px-6 py-2.5 rounded-xl bg-[var(--koto-sakura-pink)] text-white font-bold text-sm shadow-lg shadow-pink-500/20 hover:shadow-pink-500/30 hover:-translate-y-0.5 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:S?"Saving...":"Save Voice"})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 md:p-8 space-y-8 custom-scrollbar",children:[d&&e.jsxs("div",{className:"p-4 rounded-xl bg-red-50 text-red-600 text-sm font-medium border border-red-100 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),d]}),T?.warnings.length?e.jsxs("div",{className:"p-4 rounded-xl bg-amber-50 text-amber-700 text-sm border border-amber-100",children:[e.jsx("strong",{className:"block mb-1",children:"Warnings:"}),e.jsx("ul",{className:"list-disc pl-5 space-y-1",children:T.warnings.map((t,a)=>e.jsx("li",{children:t},a))})]}):null,e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-900 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-slate-100 flex items-center justify-center text-lg",children:"ðŸ†”"}),"Identity"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold uppercase text-slate-500",children:"Name"}),e.jsx("input",{value:o.name||"",onChange:t=>g({...o,name:t.target.value}),className:"w-full rounded-xl border-2 border-slate-100 px-4 py-3 text-sm focus:border-[var(--koto-sakura-pink)] outline-none transition-colors",placeholder:"e.g. Friendly Support"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold uppercase text-slate-500",children:"Description"}),e.jsx("textarea",{value:o.description||"",onChange:t=>g({...o,description:t.target.value}),className:"w-full rounded-xl border-2 border-slate-100 px-4 py-3 text-sm focus:border-[var(--koto-sakura-pink)] outline-none transition-colors resize-none",rows:3,placeholder:"Briefly describe this voice..."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold uppercase text-slate-500",children:"Guidelines (System Prompt)"}),e.jsx("textarea",{value:o.guidelines||"",onChange:t=>g({...o,guidelines:t.target.value}),className:"w-full rounded-xl border-2 border-slate-100 px-4 py-3 text-sm focus:border-[var(--koto-sakura-pink)] outline-none transition-colors resize-none font-mono text-xs",rows:4,placeholder:"Specific instructions for the AI..."})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-900 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-slate-100 flex items-center justify-center text-lg",children:"ðŸ¦"}),"Examples"]}),e.jsxs("div",{className:"space-y-3",children:[(o.exampleTweets||[]).map((t,a)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"pt-3 text-xs font-mono text-slate-300 font-bold",children:["0",a+1]}),e.jsx("textarea",{value:t,onChange:n=>W(a,n.target.value),className:"flex-1 rounded-xl border-2 border-slate-100 px-4 py-3 text-sm focus:border-[var(--koto-sakura-pink)] outline-none transition-colors resize-none",rows:2,placeholder:"Paste a model tweet here..."}),e.jsx("button",{onClick:()=>K(a),className:"text-slate-300 hover:text-red-500 transition-colors px-1",children:"Ã—"})]},a)),e.jsx("button",{onClick:$,className:"text-xs font-bold text-[var(--koto-sakura-pink)] hover:underline ml-6",children:"+ Add another example"})]})]})]}),e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-900 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-slate-100 flex items-center justify-center text-lg",children:"ðŸŽšï¸"}),"Tone Attributes"]}),e.jsxs("div",{className:"bg-slate-50 rounded-xl p-4 mb-4",children:[e.jsx("span",{className:"text-xs font-bold uppercase text-slate-400 block mb-2",children:"Quick Presets"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(B).map(([t,a])=>e.jsx("button",{onClick:()=>U(t),className:"px-3 py-1 bg-white border border-slate-200 rounded-lg text-xs font-medium text-slate-600 hover:border-[var(--koto-sakura-pink)] hover:text-[var(--koto-sakura-pink)] transition-all",title:a.description,children:a.name},t))})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[C("formality"),C("humor"),C("technicality"),C("empathy"),C("energy"),C("authenticity")]})]})})]})]})]})}):e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto backdrop-blur-md bg-white/30 p-4 flex items-center justify-center font-sans",children:e.jsxs("div",{className:"bg-white rounded-[32px] shadow-2xl border border-white/50 w-full max-w-4xl max-h-[90vh] flex flex-col overflow-hidden animate-in zoom-in-95 duration-300",children:[e.jsxs("div",{className:"p-6 md:p-8 border-b border-slate-100 bg-slate-50/50 flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Brand Voices"}),e.jsx("p",{className:"text-slate-500 text-sm mt-1",children:"Manage your collection of AI personalities."})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>A.current?.click(),className:"px-4 py-2 rounded-xl bg-white border border-slate-200 text-slate-700 text-sm font-semibold hover:bg-slate-50 hover:border-slate-300 transition-all shadow-sm",children:"Import JSON"}),e.jsx("input",{type:"file",ref:A,onChange:P,accept:".json",className:"hidden"}),e.jsxs("button",{onClick:L,className:"px-4 py-2 rounded-xl bg-[var(--koto-sakura-pink)] text-white text-sm font-bold shadow-lg shadow-pink-200 hover:shadow-xl hover:shadow-pink-300 hover:brightness-110 transition-all flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"New Voice"]}),e.jsx("button",{onClick:r,className:"w-10 h-10 rounded-full flex items-center justify-center hover:bg-slate-100 text-slate-400 hover:text-slate-600 transition-colors ml-2",children:e.jsx("span",{className:"text-2xl leading-none",children:"Ã—"})})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 md:p-8 bg-slate-50/30",children:[d&&e.jsxs("div",{className:"mb-6 p-4 rounded-xl bg-red-50 text-red-600 text-sm font-medium border border-red-100 flex items-start gap-3",children:[e.jsx("svg",{className:"w-5 h-5 flex-shrink-0 mt-0.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),d]}),s.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-16 text-center",children:[e.jsx("div",{className:"w-24 h-24 rounded-full bg-slate-100 flex items-center justify-center mb-6",children:e.jsx("span",{className:"text-4xl",children:"ðŸŽ™ï¸"})}),e.jsx("h3",{className:"text-xl font-bold text-slate-900",children:"No voices yet"}),e.jsx("p",{className:"text-slate-500 max-w-sm mt-2 mb-8",children:"Create a custom brand voice to consistently generate content that sounds like you."}),e.jsx("button",{onClick:L,className:"px-6 py-3 rounded-full bg-slate-900 text-white font-bold hover:bg-slate-800 transition-all shadow-lg hover:shadow-xl",children:"Create your first voice"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:s.map(t=>e.jsxs("div",{className:"group bg-white rounded-2xl p-5 border border-slate-100 shadow-sm hover:shadow-md transition-all hover:border-pink-200 relative overflow-hidden",children:[e.jsxs("div",{className:"absolute top-0 right-0 p-4 opacity-0 group-hover:opacity-100 transition-opacity flex gap-2 bg-gradient-to-l from-white via-white to-transparent pl-8",children:[e.jsx("button",{onClick:()=>D(t),className:"p-1.5 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-lg transition-colors",title:"Export JSON",children:e.jsx("span",{className:"text-xs font-bold",children:"JSON"})}),e.jsx("button",{onClick:()=>O(t),className:"p-1.5 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-lg transition-colors",title:"Export Markdown",children:e.jsx("span",{className:"text-xs font-bold",children:"MD"})})]}),e.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl bg-[var(--koto-sakura-pink)]/10 text-[var(--koto-sakura-pink)] flex items-center justify-center text-xl shadow-inner font-bold",children:t.name.charAt(0)}),e.jsxs("div",{className:"pr-12",children:[e.jsx("h3",{className:"font-bold text-slate-900 text-lg leading-tight",children:t.name}),e.jsx("p",{className:"text-xs font-semibold text-slate-400 uppercase tracking-wider mt-1",children:t.category||"Custom"})]})]}),e.jsx("p",{className:"text-slate-600 text-sm line-clamp-2 mb-6 h-10",children:t.description||"No description provided."}),e.jsxs("div",{className:"flex items-center gap-3 pt-4 border-t border-slate-50",children:[e.jsx("button",{onClick:()=>M(t),className:"flex-1 px-4 py-2 rounded-xl bg-slate-50 text-slate-700 font-semibold text-sm hover:bg-slate-100 transition-colors",children:"Edit"}),!t.isTemplate&&e.jsx("button",{onClick:()=>f(t.id,t.name),className:"px-4 py-2 rounded-xl text-red-400 font-semibold text-sm hover:bg-red-50 hover:text-red-500 transition-colors",children:"Delete"})]})]},t.id))})]})]})})},se=({children:s})=>e.jsxs("div",{className:"animate-in fade-in duration-500",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center p-3 mb-4 rounded-2xl bg-white shadow-lg shadow-slate-200/50 border border-slate-100",children:e.jsx("span",{className:"text-3xl",children:"ðŸŒ¸"})}),e.jsx("h1",{className:"text-3xl font-extrabold tracking-tight mb-2 text-slate-900",children:"Kotodama Settings"}),e.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Manage your AI companion's configuration"})]}),e.jsx("div",{className:"bg-white/80 backdrop-blur-xl rounded-[32px] border border-white/50 shadow-2xl shadow-slate-200/50 p-2",children:e.jsx("div",{className:"rounded-[24px] bg-white/50 p-6 md:p-10",children:s})})]}),F=[{value:"maximize-free",label:"Maximize Free Tokens",description:"Use mini models (10M free tokens/day) by default, premium only for reasoning"},{value:"always-quality",label:"Always Quality",description:"Always use premium models like GPT-4o (1M free tokens/day)"},{value:"always-mini",label:"Always Mini",description:"Always use fast/cheap models like GPT-4o Mini"}],ae=({openaiKey:s,setOpenaiKey:r,defaultModel:i,setDefaultModel:x,modelPriority:l,setModelPriority:h,saveState:b})=>{const[u,y]=c.useState(!1);return e.jsxs("div",{className:"space-y-8",children:[e.jsx("div",{className:"border-b border-slate-100 pb-2 mb-6",children:e.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"General Configuration"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"text-sm font-bold uppercase tracking-wider text-slate-500",children:"OpenAI API Key"}),b==="saved"&&e.jsx("span",{className:"text-emerald-500 text-xs font-bold px-2 py-1 bg-emerald-50 rounded-full border border-emerald-100 animate-in fade-in",children:"Saved"})]}),e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:u?"text":"password",value:s,onChange:d=>r(d.target.value),placeholder:"sk-...",className:"w-full rounded-xl px-5 py-4 pr-12 font-mono text-sm outline-none transition-all duration-200 border-2 border-slate-100 bg-slate-50 focus:bg-white focus:border-[var(--koto-sakura-pink)] text-slate-900 placeholder:text-slate-400 shadow-sm"}),e.jsx("button",{type:"button",onClick:()=>y(!u),className:"absolute right-4 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600 transition-colors",title:u?"Hide API Key":"Show API Key",children:u?e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):e.jsxs("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]}),e.jsx("p",{className:"text-xs text-slate-400 max-w-lg",children:"Your key is encrypted effectively and stored locally. We never see your key."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("label",{className:"text-sm font-bold uppercase tracking-wider text-slate-500 block",children:"Model Selection Strategy"}),e.jsxs("div",{className:"relative",children:[e.jsx("select",{value:l,onChange:d=>h(d.target.value),className:"w-full appearance-none rounded-xl px-5 py-4 text-base outline-none transition-all duration-200 border-2 border-slate-100 bg-slate-50 focus:bg-white focus:border-[var(--koto-sakura-pink)] text-slate-900 shadow-sm cursor-pointer",children:F.map(d=>e.jsx("option",{value:d.value,children:d.label},d.value))}),e.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 pointer-events-none text-slate-400",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-gradient-to-r from-emerald-50 to-teal-50 border border-emerald-100 text-xs text-emerald-700",children:[e.jsx("span",{className:"font-bold",children:"ðŸ’¡ Tip:"})," ",F.find(d=>d.value===l)?.description]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("label",{className:"text-sm font-bold uppercase tracking-wider text-slate-500 block",children:["Default AI Model ",e.jsx("span",{className:"text-slate-300 font-normal",children:"(Override)"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:i,onChange:d=>x(d.target.value),className:"w-full appearance-none rounded-xl px-5 py-4 text-base outline-none transition-all duration-200 border-2 border-slate-100 bg-slate-50 focus:bg-white focus:border-[var(--koto-sakura-pink)] text-slate-900 shadow-sm cursor-pointer",children:[e.jsx("option",{value:"",children:"Auto (Uses Strategy Above)"}),J.map(d=>e.jsxs("option",{value:d.id,children:[d.name," ",d.tokenTier==="mini"?"ðŸ†“":""]},d.id))]}),e.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 pointer-events-none text-slate-400",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),i&&V(i)&&e.jsxs("div",{className:"p-4 rounded-xl bg-slate-50 border border-slate-100 text-xs text-slate-600",children:[e.jsx("span",{className:"font-bold",children:"Info:"})," ",V(i)?.description]})]})]})},re=({voices:s,defaultVoiceId:r,setDefaultVoiceId:i,onManage:x})=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-end justify-between border-b border-slate-100 pb-2 mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Brand Voices"}),e.jsx("button",{onClick:x,className:"text-sm font-bold text-[var(--koto-sakura-pink)] hover:text-pink-600 transition-colors",children:"Manage Voices â†’"})]}),e.jsxs("div",{className:"p-6 rounded-2xl bg-gradient-to-br from-slate-50 to-white border border-slate-100 shadow-sm relative overflow-hidden group",children:[e.jsx("div",{className:"absolute right-0 top-0 w-32 h-32 bg-[var(--koto-sakura-pink)]/5 rounded-full blur-3xl group-hover:bg-[var(--koto-sakura-pink)]/10 transition-all duration-500"}),e.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row md:items-center justify-between gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-3xl font-bold text-slate-800 font-mono",children:s.length}),e.jsx("div",{className:"text-xs uppercase tracking-wider font-bold text-slate-400",children:"Active Voices"})]}),e.jsxs("div",{className:"flex-1 max-w-sm",children:[e.jsx("label",{className:"text-xs font-bold uppercase tracking-wider text-slate-500 block mb-2",children:"Default Voice"}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:r,onChange:l=>i(l.target.value),className:"w-full appearance-none rounded-xl px-4 py-3 text-sm outline-none transition-all duration-200 border border-slate-200 bg-white focus:border-[var(--koto-sakura-pink)] text-slate-900 shadow-sm cursor-pointer",disabled:s.length===0,children:[e.jsx("option",{value:"",children:"None (Always ask)"}),s.map(l=>e.jsx("option",{value:l.id,children:l.name},l.id))]}),e.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none text-slate-400",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]})]}),s.length>0&&e.jsx("p",{className:"relative z-10 mt-4 text-xs text-slate-400 text-center",children:'Click "Manage Voices" to edit, create, or delete your brand voices'})]})]}),ne=()=>{const[s,r]=c.useState(null),[i,x]=c.useState([]),[l,h]=c.useState(!0),[b,u]=c.useState("idle"),[y,d]=c.useState(!1),[m,S]=c.useState(""),[N,T]=c.useState(""),[w,A]=c.useState(""),[o,g]=c.useState("maximize-free"),M=async()=>{try{h(!0);const[f,k]=await Promise.all([chrome.runtime.sendMessage({type:"get-settings"}),chrome.runtime.sendMessage({type:"list-brand-voices"})]);if(f&&f.success){const j=f.data;r(j),S(j.apiKeys?.openai||""),T(j.defaultBrandVoiceId||""),A(j.defaultModel||""),g(j.modelPriority||"maximize-free")}k&&k.success&&x(k.data)}catch(f){console.error("Failed to load settings:",f)}finally{h(!1)}};c.useEffect(()=>{M()},[]);const L=async()=>{try{u("saving");const k=s||{apiKeys:{},analysisDepth:20,ui:{buttonPosition:"bottom-right",panelWidth:400,theme:"auto"},features:{autoAnalyze:!0,rememberHistory:!0,showToneControls:!0}},j={...k,apiKeys:{...k.apiKeys,openai:m},defaultBrandVoiceId:N,defaultModel:w,modelPriority:o};await chrome.runtime.sendMessage({type:"save-settings",payload:j}),r(j),u("saved"),setTimeout(()=>u("idle"),2e3)}catch(f){console.error("Failed to save settings:",f),u("error")}};c.useEffect(()=>{if(!l&&s){const f=setTimeout(()=>{(m!==(s.apiKeys?.openai||"")||N!==(s.defaultBrandVoiceId||"")||w!==(s.defaultModel||"")||o!==(s.modelPriority||"maximize-free"))&&L()},1e3);return()=>clearTimeout(f)}},[m,N,w,o,s,l]);const I=()=>{chrome.tabs.create({url:chrome.runtime.getURL("src/onboarding/index.html")})};return l?e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-[#FAFAFA]",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[var(--koto-sakura-pink)]"})}):e.jsxs(e.Fragment,{children:[e.jsx(se,{children:e.jsxs("div",{className:"space-y-12 animate-in fade-in duration-500",children:[e.jsx(ae,{openaiKey:m,setOpenaiKey:S,defaultModel:w,setDefaultModel:A,modelPriority:o,setModelPriority:g,saveState:b}),e.jsx(re,{voices:i,defaultVoiceId:N,setDefaultVoiceId:T,onManage:()=>d(!0)}),e.jsx("div",{className:"pt-8 border-t border-slate-100 flex justify-center",children:e.jsx("button",{onClick:I,className:"text-xs font-bold text-slate-400 hover:text-[var(--koto-sakura-pink)] uppercase tracking-wider transition-colors",children:"Restart Onboarding Flow"})})]})}),y&&e.jsx(te,{voices:i,onClose:()=>{d(!1),M()},onRefresh:M})]})},le=()=>{const s=chrome.runtime.getManifest().version;return e.jsxs("div",{className:"animate-in fade-in duration-500",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center p-3 mb-4 rounded-2xl bg-white shadow-lg shadow-slate-200/50 border border-slate-100",children:e.jsx("span",{className:"text-3xl",children:"â„¹ï¸"})}),e.jsx("h1",{className:"text-3xl font-extrabold tracking-tight mb-2 text-slate-900",children:"About Kotodama"}),e.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Learn more about your AI writing companion"})]}),e.jsx("div",{className:"bg-white/80 backdrop-blur-xl rounded-[32px] border border-white/50 shadow-2xl shadow-slate-200/50 p-2",children:e.jsxs("div",{className:"rounded-[24px] bg-white/50 p-6 md:p-10 space-y-6",children:[e.jsxs("div",{className:"bg-slate-50 rounded-2xl p-6 border border-slate-100 space-y-4",children:[e.jsxs("p",{className:"text-sm leading-relaxed text-slate-600",children:[e.jsx("strong",{className:"text-slate-900",children:"Kotodama (è¨€éœŠ)"})," implies that words hold magical power. This extension empowers your digital communication by blending your unique human voice with AI capabilities."]}),e.jsxs("div",{className:"flex flex-wrap gap-3 pt-2",children:[e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 rounded-xl bg-white border border-slate-200 text-xs font-mono text-slate-500",children:[e.jsx("span",{children:"Version"}),e.jsx("span",{className:"text-[var(--koto-sakura-pink)] font-bold",children:s})]}),e.jsxs("a",{href:"https://github.com/adenaufal/kotodama",target:"_blank",rel:"noreferrer",className:"flex items-center gap-2 px-4 py-2 rounded-xl bg-white border border-slate-200 text-xs font-bold text-slate-700 hover:border-[var(--koto-sakura-pink)] hover:text-[var(--koto-sakura-pink)] transition-colors",children:[e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{fillRule:"evenodd",d:"M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z",clipRule:"evenodd"})}),"GitHub"]}),e.jsxs("a",{href:"https://github.com/adenaufal/kotodama/issues",target:"_blank",rel:"noreferrer",className:"flex items-center gap-2 px-4 py-2 rounded-xl bg-white border border-slate-200 text-xs font-bold text-slate-700 hover:border-[var(--koto-sakura-pink)] hover:text-[var(--koto-sakura-pink)] transition-colors",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),"Report Issue"]})]})]}),e.jsx("div",{className:"text-center pt-4",children:e.jsx("p",{className:"text-[10px] text-slate-400 uppercase tracking-widest font-bold",children:"Privacy Focused â€¢ Local Storage â€¢ Open Source"})})]})})]})},oe=()=>{const[s,r]=c.useState("settings"),i=[{id:"settings",label:"Settings",icon:e.jsxs("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})},{id:"about",label:"About",icon:e.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}];return e.jsxs("div",{className:"min-h-screen w-full relative overflow-x-hidden light-mode font-sans",style:{backgroundColor:"#FAFAFA"},children:[e.jsxs("div",{className:"fixed inset-0 overflow-hidden z-0 pointer-events-none",children:[e.jsx("div",{className:"absolute top-[-10%] right-[-5%] w-[600px] h-[600px] rounded-full blur-[100px] opacity-60",style:{background:"radial-gradient(circle, rgba(244,114,182,0.15) 0%, rgba(255,255,255,0) 70%)"}}),e.jsx("div",{className:"absolute bottom-[-10%] left-[-5%] w-[700px] h-[700px] rounded-full blur-[100px] opacity-50",style:{background:"radial-gradient(circle, rgba(96,165,250,0.12) 0%, rgba(255,255,255,0) 70%)"}})]}),e.jsx("div",{className:"fixed top-0 left-0 right-0 z-50 flex justify-center pt-6 px-4",children:e.jsx("nav",{className:"flex gap-1 rounded-2xl p-1.5 bg-white/80 backdrop-blur-xl border border-slate-200/50 shadow-lg shadow-slate-200/30",children:i.map(x=>{const l=s===x.id;return e.jsxs("button",{onClick:()=>r(x.id),className:"flex items-center gap-2 rounded-xl px-5 py-2.5 text-sm font-semibold transition-all duration-200",style:{backgroundColor:l?"var(--koto-sakura-pink)":"transparent",color:l?"white":"var(--koto-text-secondary)",boxShadow:l?"0 4px 12px rgba(232, 92, 143, 0.25)":"none"},children:[x.icon,e.jsx("span",{children:x.label})]},x.id)})})}),e.jsx("div",{className:"relative z-10 pt-24 pb-12 px-4 md:px-8",children:e.jsxs("div",{className:"max-w-3xl mx-auto",children:[s==="settings"&&e.jsx(ne,{}),s==="about"&&e.jsx(le,{})]})}),e.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-40 text-center py-4 pointer-events-none",children:e.jsxs("p",{className:"text-[10px] text-slate-400 font-medium",children:["Â© ",new Date().getFullYear()," Kotodama. All rights reserved."]})})]})},ie=q.createRoot(document.getElementById("root"));ie.render(e.jsx(G.StrictMode,{children:e.jsx(H,{children:e.jsx(oe,{})})}));
